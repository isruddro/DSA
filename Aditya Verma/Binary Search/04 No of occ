using System;

class Program
{
    static int minIndex = int.MaxValue;
    static int maxIndex = int.MinValue;

    static void BinarySearch(int start, int end, int[] arr, int target, bool leftBias)
    {
        if (start > end) return;

        int mid = (start + end) / 2;

        if (arr[mid] > target)
        {
            BinarySearch(start, mid - 1, arr, target, leftBias);
        }
        else if (arr[mid] < target)
        {
            BinarySearch(mid + 1, end, arr, target, leftBias);
        }
        else
        {
            if (leftBias)
            {
                minIndex = Math.Min(minIndex, mid);
                BinarySearch(start, mid - 1, arr, target, leftBias);
            }
            else
            {
                maxIndex = Math.Max(maxIndex, mid);
                BinarySearch(mid + 1, end, arr, target, leftBias);
            }
        }
    }

    static int CountOccurrences(int[] arr, int n, int x)
    {
        minIndex = int.MaxValue;
        maxIndex = int.MinValue;

        BinarySearch(0, n - 1, arr, x, true);  // Find leftmost occurrence
        BinarySearch(0, n - 1, arr, x, false); // Find rightmost occurrence

        if (minIndex == int.MaxValue) minIndex = -1;
        if (maxIndex == int.MinValue) maxIndex = -1;

        if (minIndex == -1) return 0; // Target not found
        return maxIndex - minIndex + 1; // Count of occurrences
    }

    static void Main()
    {
        int[] arr = { 2, 4, 4, 4, 6, 8, 8, 10 };
        int n = arr.Length;
        int x = 4;

        int count = CountOccurrences(arr, n, x);
        Console.WriteLine($"The count of {x} is: {count}");
    }
}
